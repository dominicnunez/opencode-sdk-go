# PRD: Complete SDK Redesign — Remove Generated Code Patterns

- [x] In `session.go`: delete every `type *JSON struct` definition (~65 of them, e.g. `sessionJSON`, `agentPartJSON`, `assistantMessageJSON`), delete every `func (r *SomeType) UnmarshalJSON(data []byte) (err error)` method that populates those JSON structs, remove the `JSON someTypeJSON \`json:"-"\`` field from every response struct, remove unused imports (`"github.com/tidwall/gjson"`, `"reflect"`, `"github.com/dominicnunez/opencode-sdk-go/internal/apijson"` — keep `apiquery` if query param structs still use it), and remove the `// File generated from our OpenAPI spec by Stainless.` comment at the top. Do NOT change response struct fields, param structs, or service method signatures.

- [x] In `config.go`: delete every `type *JSON struct` definition (~40 of them, e.g. `configJSON`, `configAgentJSON`, `configCommandJSON`), delete every `func (r *SomeType) UnmarshalJSON(data []byte) (err error)` method, remove the `JSON someTypeJSON \`json:"-"\`` field from every response struct, remove unused imports (`"github.com/tidwall/gjson"`, `"reflect"`, `"github.com/dominicnunez/opencode-sdk-go/internal/apijson"` — keep `apiquery` if query param structs still use it), and remove the `// File generated from our OpenAPI spec by Stainless.` comment at the top. Do NOT change response struct fields, param structs, or service method signatures.

- [x] In `shared/shared.go`: delete every `type *JSON struct` definition (6 of them: `messageAbortedErrorJSON`, `messageAbortedErrorDataJSON`, `providerAuthErrorJSON`, `providerAuthErrorDataJSON`, `unknownErrorJSON`, `unknownErrorDataJSON`), delete every `func (r *SomeType) UnmarshalJSON(data []byte) (err error)` method, remove the `JSON someTypeJSON \`json:"-"\`` field from every response struct, and remove unused imports (`"github.com/tidwall/gjson"`, `"reflect"`, `"github.com/dominicnunez/opencode-sdk-go/internal/apijson"`).

- [x] In `session.go`: convert all `param.Field[T]` wrapper types in input/param structs to direct Go types. Rules: `param.Field[string]` with tag `json:"foo,required"` becomes `string` with tag `json:"foo"`; `param.Field[string]` with tag `json:"foo"` (no required) becomes `*string` with tag `json:"foo,omitempty"`; `param.Field[int64]` with `required` becomes `int64`; without `required` becomes `*int64` with `omitempty`; `param.Field[SomeType]` with `required` becomes `SomeType`; without `required` becomes `*SomeType` with `omitempty`; `param.Field[interface{}]` becomes `any` with `omitempty`; `param.Field[[]T]` with `required` becomes `[]T`. Remove the `"github.com/dominicnunez/opencode-sdk-go/internal/param"` import. Update `session_test.go` to construct param structs with direct values instead of `param.Field` wrappers (e.g. `opencode.F("value")` becomes just `"value"`, pointer fields use `opencode.String("value")`).

- [x] Delete `field.go` (root-level file that re-exports param helpers `F()`, `Null()`, `Raw()`, `String()`, `Int()`, `Float()`, `Bool()`, `FileParam()`). Delete the entire `internal/param/` directory. In `internal/requestconfig/requestconfig.go`, remove the `"github.com/dominicnunez/opencode-sdk-go/internal/param"` import and any code paths that handle `param.Field` types. Verify no other files import `internal/param` — if any do, fix those imports first. Run `go mod tidy` after.

- [ ] In `internal/apierror/apierror.go`: remove the `errorJSON` metadata struct and the `UnmarshalJSON` method that populates it. Replace with standard `json.Unmarshal` for the `Error` struct. Remove the `JSON errorJSON \`json:"-"\`` field from the `Error` struct. Keep all other `Error` struct fields and the `Error()` string method intact. Remove unused imports (`"github.com/tidwall/gjson"`, `"reflect"`, `"github.com/dominicnunez/opencode-sdk-go/internal/apijson"` if no longer needed).

- [ ] Final cleanup: check if `aliases.go` only re-exports types that no longer exist or are unused — if so delete it. Check if `"github.com/tidwall/gjson"` is still imported anywhere in the codebase — if not, run `go mod tidy` to remove it from `go.mod`. Run `go vet ./...` and `go test -race ./...` and `go build ./...` to verify everything is clean.
